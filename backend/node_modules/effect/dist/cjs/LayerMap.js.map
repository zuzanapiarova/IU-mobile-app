{"version":3,"file":"LayerMap.js","names":["Context","_interopRequireWildcard","require","Effect","FiberRefsPatch","_Function","core","Layer","RcMap","Runtime","Scope","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","Symbol","for","make","fnUntraced","lookup","options","context","memoMap","unsafeMap","CurrentMemoMap","key","makeMemoMap","rcMap","scopeWith","scope","diffFiberRefs","buildWithMemoMap","pipe","map","patch","layer","scopedContext","withFiberRuntime","fiber","unsafeGet","currentContext","oldRefs","getFiberRefs","newRefs","id","revert","diff","setFiberRefs","as","addFinalizerExit","void","runtimeEffect","fiberRefs","succeed","runtimeFlags","defaultRuntime","idleTimeToLive","preloadKeys","identity","unwrapScoped","runtime","flatMap","invalidate","fromRecord","layers","preload","keys","undefined","Service","Err","globalThis","Error","limit","stackTraceLimit","creationError","TagClass","TagClass_","setPrototypeOf","getPrototypeOf","GenericTag","stack","DefaultWithoutDependencies","scoped","Default","dependencies","length","provide","layerMap"],"sources":["../../src/LayerMap.ts"],"sourcesContent":[null],"mappings":";;;;;;AAIA,IAAAA,OAAA,GAAAC,uBAAA,CAAAC,OAAA;AAEA,IAAAC,MAAA,GAAAF,uBAAA,CAAAC,OAAA;AACA,IAAAE,cAAA,GAAAH,uBAAA,CAAAC,OAAA;AACA,IAAAG,SAAA,GAAAH,OAAA;AACA,IAAAI,IAAA,GAAAL,uBAAA,CAAAC,OAAA;AACA,IAAAK,KAAA,GAAAN,uBAAA,CAAAC,OAAA;AACA,IAAAM,KAAA,GAAAP,uBAAA,CAAAC,OAAA;AACA,IAAAO,OAAA,GAAAR,uBAAA,CAAAC,OAAA;AACA,IAAAQ,KAAA,GAAAT,uBAAA,CAAAC,OAAA;AAAmC,SAAAD,wBAAAU,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAZ,uBAAA,YAAAA,CAAAU,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAbnC;;;;;AAgBA;;;;AAIO,MAAMkB,MAAM,GAAAC,OAAA,CAAAD,MAAA,gBAAkBE,MAAM,CAACC,GAAG,CAAC,iBAAiB,CAAC;AAwClE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDO,MAAMC,IAAI,GAAAH,OAAA,CAAAG,IAAA,gBAkBb/B,MAAM,CAACgC,UAAU,CAAC,WACpBC,MAA0C,EAC1CC,OAGa;EAEb,MAAMC,OAAO,GAAG,OAAOnC,MAAM,CAACmC,OAAO,EAAS;EAE9C;EACA;EACA,MAAMC,OAAO,GAAGD,OAAO,CAACE,SAAS,CAAClB,GAAG,CAACf,KAAK,CAACkC,cAAc,CAACC,GAAG,CAAC,GAC3D1C,OAAO,CAACuB,GAAG,CAACe,OAAO,EAAE/B,KAAK,CAACkC,cAAc,CAAC,GAC1C,OAAOlC,KAAK,CAACoC,WAAW;EAE5B,MAAMC,KAAK,GAAG,OAAOpC,KAAK,CAAC0B,IAAI,CAAC;IAC9BE,MAAM,EAAGM,GAAM,IACbvC,MAAM,CAAC0C,SAAS,CAAEC,KAAK,IAAK3C,MAAM,CAAC4C,aAAa,CAACxC,KAAK,CAACyC,gBAAgB,CAACZ,MAAM,CAACM,GAAG,CAAC,EAAEH,OAAO,EAAEO,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CACzG9C,MAAM,CAAC+C,GAAG,CAAC,CAAC,CAACC,KAAK,EAAEb,OAAO,CAAC,MAAM;MAChCc,KAAK,EAAE7C,KAAK,CAAC8C,aAAa,CACxB/C,IAAI,CAACgD,gBAAgB,CAAwCC,KAAK,IAAI;QACpE,MAAMT,KAAK,GAAG9C,OAAO,CAACwD,SAAS,CAACD,KAAK,CAACE,cAAc,EAAE/C,KAAK,CAACA,KAAK,CAAC;QAClE,MAAMgD,OAAO,GAAGH,KAAK,CAACI,YAAY,EAAE;QACpC,MAAMC,OAAO,GAAGxD,cAAc,CAAC+C,KAAK,CAACA,KAAK,EAAEI,KAAK,CAACM,EAAE,EAAE,EAAEH,OAAO,CAAC;QAChE,MAAMI,MAAM,GAAG1D,cAAc,CAAC2D,IAAI,CAACH,OAAO,EAAEF,OAAO,CAAC;QACpDH,KAAK,CAACS,YAAY,CAACJ,OAAO,CAAC;QAC3B,OAAOzD,MAAM,CAAC8D,EAAE,CACdvD,KAAK,CAACwD,gBAAgB,CAACpB,KAAK,EAAE,MAAK;UACjCS,KAAK,CAACS,YAAY,CAAC5D,cAAc,CAAC+C,KAAK,CAACW,MAAM,EAAEP,KAAK,CAACM,EAAE,EAAE,EAAEN,KAAK,CAACI,YAAY,EAAE,CAAC,CAAC;UAClF,OAAOxD,MAAM,CAACgE,IAAI;QACpB,CAAC,CAAC,EACF7B,OAAO,CACR;MACH,CAAC,CAAC,CACH;MACD8B,aAAa,EAAEjE,MAAM,CAACmD,gBAAgB,CAAwCC,KAAK,IAAI;QACrF,MAAMc,SAAS,GAAGjE,cAAc,CAAC+C,KAAK,CAACA,KAAK,EAAEI,KAAK,CAACM,EAAE,EAAE,EAAEN,KAAK,CAACI,YAAY,EAAE,CAAC;QAC/E,OAAOxD,MAAM,CAACmE,OAAO,CAAC7D,OAAO,CAACyB,IAAI,CAAC;UACjCI,OAAO;UACP+B,SAAS;UACTE,YAAY,EAAE9D,OAAO,CAAC+D,cAAc,CAACD;SACtC,CAAC,CAAC;MACL,CAAC;KACQ,EAAC,CACb;IACHE,cAAc,EAAEpC,OAAO,EAAEoC;GAC1B,CAAC;EAEF,IAAIpC,OAAO,EAAEqC,WAAW,EAAE;IACxB,KAAK,MAAMhC,GAAG,IAAIL,OAAO,CAACqC,WAAW,EAAE;MACrC,OAAQlE,KAAK,CAACe,GAAG,CAACqB,KAAK,EAAEF,GAAG,CAA8C;IAC5E;EACF;EAEA,OAAO,IAAAiC,kBAAQ,EAA4C;IACzD,CAAC7C,MAAM,GAAGA,MAAM;IAChBc,KAAK;IACLrB,GAAG,EAAGmB,GAAG,IAAKnC,KAAK,CAACqE,YAAY,CAACzE,MAAM,CAAC+C,GAAG,CAAC1C,KAAK,CAACe,GAAG,CAACqB,KAAK,EAAEF,GAAG,CAAC,EAAE,CAAC;MAAEU;IAAK,CAAE,KAAKA,KAAK,CAAC,CAAC;IACzFyB,OAAO,EAAGnC,GAAG,IAAKvC,MAAM,CAAC2E,OAAO,CAACtE,KAAK,CAACe,GAAG,CAACqB,KAAK,EAAEF,GAAG,CAAC,EAAE,CAAC;MAAE0B;IAAa,CAAE,KAAKA,aAAa,CAAC;IAC7FW,UAAU,EAAGrC,GAAG,IAAKlC,KAAK,CAACuE,UAAU,CAACnC,KAAK,EAAEF,GAAG;GACjD,CAAC;AACJ,CAAC,CAAC;AAEF;;;;;AAKO,MAAMsC,UAAU,GAAGA,CAIxBC,MAAc,EACd5C,OAGa,KAUbH,IAAI,CAAEQ,GAAiB,IAAKuC,MAAM,CAACvC,GAAG,CAAC,EAAE;EACvC,GAAGL,OAAO;EACVqC,WAAW,EAAErC,OAAO,EAAE6C,OAAO,GAAGvD,MAAM,CAACwD,IAAI,CAACF,MAAM,CAAC,GAAGG;CACvD,CAAQ;AA+CX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAArD,OAAA,CAAAiD,UAAA,GAAAA,UAAA;AAqDO,MAAMK,OAAO,GAAGA,CAAA,KACvB,CAqBExB,EAAM,EACNxB,OAAgB,KAcd;EACF,MAAMiD,GAAG,GAAGC,UAAU,CAACC,KAAY;EACnC,MAAMC,KAAK,GAAGH,GAAG,CAACI,eAAe;EACjCJ,GAAG,CAACI,eAAe,GAAG,CAAC;EACvB,MAAMC,aAAa,GAAG,IAAIL,GAAG,EAAE;EAC/BA,GAAG,CAACI,eAAe,GAAGD,KAAK;EAE3B,SAASG,QAAQA,CAAA,GAAI;EACrB,MAAMC,SAAS,GAAGD,QAA+E;EACjGjE,MAAM,CAACmE,cAAc,CAACF,QAAQ,EAAEjE,MAAM,CAACoE,cAAc,CAAC/F,OAAO,CAACgG,UAAU,CAAYnC,EAAE,CAAC,CAAC,CAAC;EACzF+B,QAAQ,CAAClD,GAAG,GAAGmB,EAAE;EACjBlC,MAAM,CAACC,cAAc,CAACgE,QAAQ,EAAE,OAAO,EAAE;IACvCrE,GAAGA,CAAA;MACD,OAAOoE,aAAa,CAACM,KAAK;IAC5B;GACD,CAAC;EAEFJ,SAAS,CAACK,0BAA0B,GAAG3F,KAAK,CAAC4F,MAAM,CACjDN,SAAS,EACT,QAAQ,IAAIxD,OAAO,GACfH,IAAI,CAACG,OAAO,CAACD,MAAM,EAAEC,OAAO,CAAC,GAC7B2C,UAAU,CAAC3C,OAAO,CAAC4C,MAAa,EAAE5C,OAAO,CAAC,CAC/C;EACDwD,SAAS,CAACO,OAAO,GAAG/D,OAAO,CAACgE,YAAY,IAAIhE,OAAO,CAACgE,YAAY,CAACC,MAAM,GAAG,CAAC,GACzE/F,KAAK,CAACgG,OAAO,CAACV,SAAS,CAACK,0BAA0B,EAAE7D,OAAO,CAACgE,YAAmB,CAAC,GAChFR,SAAS,CAACK,0BAA0B;EAEtCL,SAAS,CAACtE,GAAG,GAAImB,GAAW,IAAKnC,KAAK,CAACqE,YAAY,CAACzE,MAAM,CAAC+C,GAAG,CAAC2C,SAAS,EAAGW,QAAQ,IAAKA,QAAQ,CAACjF,GAAG,CAACmB,GAAG,CAAC,CAAC,CAAC;EAC3GmD,SAAS,CAAChB,OAAO,GAAInC,GAAW,IAAKvC,MAAM,CAAC2E,OAAO,CAACe,SAAS,EAAGW,QAAQ,IAAKA,QAAQ,CAAC3B,OAAO,CAACnC,GAAG,CAAC,CAAC;EACnGmD,SAAS,CAACd,UAAU,GAAIrC,GAAW,IAAKvC,MAAM,CAAC2E,OAAO,CAACe,SAAS,EAAGW,QAAQ,IAAKA,QAAQ,CAACzB,UAAU,CAACrC,GAAG,CAAC,CAAC;EAEzG,OAAOkD,QAAe;AACxB,CAAC;AAAA7D,OAAA,CAAAsD,OAAA,GAAAA,OAAA","ignoreList":[]}